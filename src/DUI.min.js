(function(){[].indexOf||(Array.prototype.indexOf=function(a,c){c=c==null?0:c;var b=this.length;for(c=c;c<b;c++)if(this[c]==a)return c;return-1});[].filter||(Array.prototype.filter=function(a,c){for(var b=this.length>>>0,d=[],e=0;e<b;e++)if(e in this){var f=this[e];a.call(c,f,e,this)&&d.push(f)}return d});DUI=function(a,c,b){if(arguments.length==1)c=a;else if(arguments.length==2&&a.constructor==Function){b=c;c=a}c=c&&c.constructor==Function?c:function(){};b=b||{};var d=c.toString(),e=/(DUI\.\w+)/gim,
f=[],g;if(b&&b.newQ&&DUI.currentQ.length>0)DUI.currentQ=DUI.actions[DUI.actions.push([])-1];if(a&&a.constructor==Array)f=a;for(DUI.loadedScripts.concat(DUI.loading).indexOf(DUI.jQueryURL)==-1&&DUI.load(DUI.jQueryURL);g=e.exec(d);){var k=true;g=g[1]||null;var n=["clean"];if(["isClass","global","prototype","_dontEnum","_ident","_bootstrap","init","create","ns","each"].indexOf(g.replace("DUI.",""))>-1)g="DUI.Class";for(var h=0;h<f.length;h++)if(f[h]==g)k=false;k&&n.indexOf(g.replace("DUI.",""))==-1&&
f.push(g+".js")}b.defer?DUI.deferred.push(c):DUI.currentQ.push(c);for(h=0;h<f.length;h++)DUI.load(f[h],b);DUI.loading.length==0&&DUI.loaded()};DUI.loading=[];DUI.actions=[];DUI.currentQ=DUI.actions[DUI.actions.push([])-1];DUI.deferred=[];DUI.internals=[];DUI.loadedScripts=[];DUI.jQueryURL="http://ajax.googleapis.com/ajax/libs/jquery/1.4.0/jquery.min.js";DUI.scriptURL="http://"+window.location.hostname+"/";DUI.maps={};DUI.debug=false;DUI.load=function(a,c){for(var b=a.split(/:(?!\/\/)/),d=0;d<b.length;d++){if(DUI.maps[b[d]])b[d]=
DUI.maps[b[d]];if(b[d].indexOf("DUI.")==0&&DUI.maps["DUI.All"])b[d]=DUI.maps["DUI.All"]}a=b.join("/");if(!(DUI.loading.indexOf(a)>-1))if(DUI.loadedScripts.indexOf(a)>-1)DUI.loaded(a,c);else{DUI.loading.push(a);b=a.indexOf("http")==0?a:a.indexOf("DUI.")>-1?DUI.scriptURL+"DUI/"+a:DUI.scriptURL+a;if(DUI.debug){d=b.search(/(\?|&)/)>-1?"&":"?";b+=d+(new Date).getTime()}d=document;var e=d.createElement("script");e.setAttribute("type","text/javascript");e.setAttribute("src",b);e.onload=function(){DUI.loaded(a,
c)};e.onerror=function(f,g){throw"DUI could not load the following script: "+g;};e.onreadystatechange=function(){"loadedcomplete".indexOf(e.readyState)>-1&&DUI.loaded(a,c)};d.body.appendChild(e)}};DUI.loaded=function(a){DUI.loading=DUI.loading.filter(function(b){return b!=a});a&&DUI.loadedScripts.push(a);if(DUI.loading.length==0){for(;DUI.actions.length>0;)for(var c=DUI.actions.shift();c.length>0;)c.pop().apply(DUI);if(DUI.deferred.length)for(;DUI.deferred.length>0;)DUI.deferred.pop().apply(DUI);
DUI.actions=[[]];DUI.currentQ=DUI.actions[0]}};DUI.clean=function(a){if(a.constructor==Array)$.each(a,function(){DUI.clean(this)});else{var c=a.replace(/([:\.]{1})/g,"\\$1");$("._view\\:"+c+", ._click\\:"+c+", ._hover\\:"+c+", ._load\\:"+c).removeClass("_view:"+a+" _click:"+a+" _hover:"+a+" _load:"+a)}};var i=document,j=function(a){a=a||window.event;if(!(a.button==2||a.ctrlKey||a.metaKey)){var c=function(b,d){var e=b.className,f=e?e.match(/(?:^|\s)_(click|hover):(\S+)(?:$|\s)/):undefined;if(f&&f[1]&&
f[2]){if(f[1]=="hover"&&d=="mouseover"||f[1]=="click"&&d=="click")f=f[2];else return;if(b.className.indexOf("booting")==-1){b.className=e+" booting";DUI([f],function(){DUI.clean(f);var g=new $.Event(d);g.fromDUI=true;$(b).removeClass("booting").trigger(g)},{newQ:true})}a.preventDefault?a.preventDefault():(a.returnValue=false)}b.parentNode&&c(b.parentNode,d)};c(a.target||a.srcElement,a.type)}},l=function(){for(var a='class="'+document.body.className+'" '+document.body.innerHTML,c=/class=(?:'|")(?:[^'"]*?)_load:([^\s"']+)(?:[^'"]*?)(?:'|")/gim,
b=[],d;d=c.exec(a);){var e=true;d=d[1]||null;for(var f=0;f<b.length;f++)if(b[f]==d)e=false;e&&b.push(d)}DUI(b,function(){DUI.clean(b)},{newQ:true})},m=function(){var a=window.innerHeight,c=window.scrollY,b=[],d;if(document.querySelectorAll){qsa=document.querySelectorAll("*[class*=_view]");for(var e=0;e<qsa.length;e++){d=qsa[e];a+c>d.offsetTop&&b.push(/(?:^|\s)_view:([^\s]+)(?:\s|$)/.exec(d.className)[1])}}else console.log("no");if(b.length>0){d.className+=" booting";DUI(b,function(){$(d).removeClass("booting");
DUI.clean(b)},{newQ:true})}};if(i.attachEvent){i.attachEvent("onclick",j);i.attachEvent("onmouseover",j);i.attachEvent("onscroll",m);window.attachEvent("onload",l)}else{i.addEventListener("click",j,false);i.addEventListener("mouseover",j,false);i.addEventListener("scroll",m,false);window.addEventListener("load",l,false)}})(); 